version: "3.7"


services:
  docker-registry:
    deploy:
      labels:
        caddy: ${REGISTRY_DOMAIN}
        caddy.basicauth.${REGISTRY_USER}: ${REGISTRY_PASSWORD}
        caddy.reverse_proxy: "{{upstreams 5000}}"